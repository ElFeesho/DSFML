<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="description" content="DSFML : DSFML is a D binding of SFML " />

  <link rel="stylesheet" type="text/css" media="screen" href="../stylesheets/stylesheet.css">
  <link rel="stylesheet" type="text/css" media="screen" href="../stylesheets/dsfml.css">
  <title>Events Explained</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
</head>
<body>
<!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/Jebbs/DSFML">View on GitHub</a>

          <h1 id="project_title">DSFML</h1>
           <ul class="hnav">
              <li class="hnav"><a class="hnav" href="../index.html">Home</a></li>
              <li class="hnav"><a class="hnav" href="../tutorials.html">Tutorials</a></li>
              <li class="hnav"><a class="hnav" href=".//doc.html">Documentation</a></li>
              <li class="hnav"><a class="hnav" href=".//downloads.html">Downloads</a></li>
              <li class="hnav"><a class="hnav" href="http://en.sfml-dev.org/forums/index.php?board=13.0">Forum</a></li>
              <li class="hnav"><a class="hnav" href="../contact.html">Contact</a></li>
        </ul>

        </header>
    </div>

<!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
<h1 id="events-explained">Events Explained</h1>
<h2 id="introduction">Introduction</h2>
<p>This tutorial is a detailed list of window events. It describes them, and shows how to (and not to) use them.</p>
<h2 id="the-event-type">The Event Type</h2>
<p>Before dealing with events, it is important to understand what the <a href="http://dsfml.com/dsfml/window/event.html">Event</a> type is, and how to correctly use it. <a href="http://dsfml.com/dsfml/window/event.html">Event</a> is a union, which means that only one of its member is valid at a time (remember that, in D, all the members of a union share the same memory space). The valid member is the one that matches the event type, for example <code>event.key</code> for a <code>KeyPressed</code> event. Trying to read any other member will result in an undefined behaviour (most likely: random or invalid values). So never try to use an event member that doesn't match its type.</p>
<p><a href="http://dsfml.com/dsfml/window/event.html">Event</a> instances are filled by the <code>pollEvent()</code> (or <code>waitEvent()</code>) function of the <a href="http://dsfml.com/dsfml/window/window.html">Window</a> class. Only these two functions can produce valid events, any attempt to use an <a href="http://dsfml.com/dsfml/window/event.html">Event</a> without first a successful call to <code>pollEvent()</code> (or <code>waitEvent()</code>) will result in the same undefined behaviour that I mentioned above.</p>
<p>To be clear, here is what a typical event loop looks like:</p>
<div class="sourceCode"><pre class="sourceCode d"><code class="sourceCode d">Event event;

<span class="kw">while</span>(window.pollEvent(event))
{

    <span class="co">// check the type of the event</span>
    <span class="kw">switch</span>(event.type)
    {
        <span class="co">// window closed</span>
        <span class="kw">case</span> Event.EventType.Closed:
            window.close();
            <span class="kw">break</span>;

        <span class="co">// key pressed</span>
        <span class="kw">case</span> Event.EventType.KeyPressed:
            ...
            <span class="kw">break</span>;

        <span class="co">// we don&#39;t process other types of events</span>
        <span class="kw">default</span>:
            <span class="kw">break</span>;
    }
}</code></pre></div>
<blockquote>
<p>Read the above paragraph once again and make sure that it's printed in your head, the <a href="http://dsfml.com/dsfml/window/event.html">Event</a> union causes too many problems to inadvertent programmers.</p>
</blockquote>
<p>Alright, now we can see what events DSFML supports, what they mean and how to use them properly.</p>
<h2 id="the-closed-event">The Closed Event</h2>
<p>The <code>Event.EventType.Closed</code> event is triggered when the user wants to close the window, by all the possible ways that the OS provides (&quot;close&quot; button, keyboard shortcut, etc.). This event only represents a close request, the window is not physically closed.</p>
<p>A typical code will just call <code>window.close()</code> in reaction to this event, to actually close the window. But you may also want to do something, like saving the current application state or asking the user what to do. If you don't do anything, the window remains open.</p>
<p>There's no member associated to this event in the <a href="http://dsfml.com/dsfml/window/event.html">Event</a> union.</p>
<div class="sourceCode"><pre class="sourceCode d"><code class="sourceCode d"><span class="kw">if</span> (event.type == Event.EventType.Closed)
    window.close();</code></pre></div>
<h2 id="the-resized-event">The Resized Event</h2>
<p>The <code>Event.EventType.Resized</code> event is triggered when the window is resized, either by a user action or programmatically by setting <code>window.size</code>.</p>
<p>You can use this event to adjust the rendering settings: the viewport if you use OpenGL directly, or the current view if you use dsfml-graphics.</p>
<p>The member associated to this event is <code>event.size</code>, it contains the new size of the window.</p>
<div class="sourceCode"><pre class="sourceCode d"><code class="sourceCode d"><span class="kw">if</span> (event.type == Event.EventType.Resized)
{
    writeln(<span class="st">&quot;new width: &quot;</span>, event.size.width);
    writeln(<span class="st">&quot;new height: &quot;</span>, event.size.height);
}</code></pre></div>
<h2 id="the-lostfocus-and-gainedfocus-events">The LostFocus and GainedFocus Events</h2>
<p>The <code>Event.EventType.LostFocus</code> and <code>Event.EventType.GainedFocus</code> events are triggered when the window loses/gains the focus, which happens when you switch the currently active window. When the window is out of focus, it doesn't receive keyboard events.</p>
<p>This event can be used if you want to pause your game when the window is inactive.</p>
<p>There's no member associated to these events in the <a href="http://dsfml.com/dsfml/window/event.html">Event</a> union.</p>
<div class="sourceCode"><pre class="sourceCode d"><code class="sourceCode d"><span class="kw">if</span> (event.type == Event.EventType.LostFocus)
    myGame.pause();

<span class="kw">if</span> (event.type == Event.EventType.GainedFocus)
    myGame.resume();</code></pre></div>
<h2 id="the-textentered-event">The TextEntered Event</h2>
<p>The <code>Event.EventType.TextEntered</code> event is triggered when a character is typed. This must not be confused with the <code>KeyPressed</code> event: <code>TextEntered</code> interprets the user input and produces the appropriate printable character. For example, pressing '^' then 'e' on a french keyboard will produce two <code>KeyPressed</code> events, but a single <code>TextEntered</code> event containing the 'Ãª' character. It works with all the input methods provided by the OS, even the most specific or complex ones.</p>
<p>This event is typically used to catch user input in a text field.</p>
<p>The member associated to this event is <code>event.text</code>, it contains the Unicode value of the entered character. This is stored internally as a <code>dchar</code>.</p>
<div class="sourceCode"><pre class="sourceCode d"><code class="sourceCode d"><span class="kw">if</span> (event.type == Event.EventType.TextEntered)
{
    writeln(<span class="st">&quot;Character typed: &quot;</span>, event.text.unicode);
}</code></pre></div>
<p>Note that, since they are part of the Unicode standard, some non-printable characters such as backspace are generated by this event. In most cases you'll need to filter them out.</p>
<blockquote>
<p>Many programmers use the <code>KeyPressed</code> event to get user input, and start to implement crazy algorithms that try to interpret all the possible key combinations to produce correct characters. Don't do that!</p>
</blockquote>
<h2 id="the-keypressed-and-keyreleased-events">The KeyPressed and KeyReleased Events</h2>
<p>The <code>Event.EventType.KeyPressed</code> and <code>Event.EventType.KeyReleased</code> events are triggered when a keyboard key is pressed/released.</p>
<p>If a key is held, multiple <code>KeyPressed</code> events will be generated, at the default OS delay (ie. the same delay that applies when you hold a letter in a text editor). To disable repeated <code>KeyPressed</code> events, you can call <code>window.setKeyRepeatEnabled(false)</code>. On the contrary, obviously, <code>KeyReleased</code> events can never be repeated.</p>
<p>This event is the one to use if you want to trigger an action exactly once when a key is pressed or released, like making a character jump with space, or exiting something with escape.</p>
<blockquote>
<p>Sometimes, people try to use the KeyPressed event to implement smooth movement. Doing so will not produce smooth movements, because when you hold a key you only get a few events (remember, the repeat delay). Smooth movements can only be achieved by using real-time keyboard input with <a href="http://dsfml.com/dsfml/window/keyboard.html">Keyboard</a> (see the <a href="https://github.com/luke5542/DSFML-Tutorials/blob/master/inputs.md">dedicated tutorial</a>).</p>
</blockquote>
<p>The member associated to these events is event.key, it contains the code of the pressed/released key, as well as the current state of modifier keys (alt, control, shift, system).</p>
<div class="sourceCode"><pre class="sourceCode d"><code class="sourceCode d"><span class="kw">if</span> (event.type == Event.EventType.KeyPressed)
{
    <span class="kw">if</span> (event.key.code == Keyboard.Key.Escape)
    {
        writeln(<span class="st">&quot;the escape key was pressed&quot;</span>);
        writeln(<span class="st">&quot;control:&quot;</span>, event.key.control);
        writeln(<span class="st">&quot;alt:&quot;</span>, event.key.alt);
        writeln(<span class="st">&quot;shift:&quot;</span>, event.key.shift);
        writeln(<span class="st">&quot;system:&quot;</span>, event.key.system);
    }
}</code></pre></div>
<p>Note that some keys have a special meaning for the OS, and will produce unexpected behaviours. An exemple is the F10 key on Windows, which &quot;steals&quot; the focus, or the F12 key which starts the debugger when using Visual Studio. This will probably be solved in a future version of DSFML.</p>
<h2 id="the-mousewheelmoved-event">The MouseWheelMoved Event</h2>
<p>The <code>Event.EventType.MouseWheelMoved</code> event is triggered when the mouse wheel moves up or down.</p>
<p>The member associated to this event is <code>event.mouseWheel</code>, it contains the amount of ticks the wheel has moved, as well as the current position of the mouse cursor.</p>
<div class="sourceCode"><pre class="sourceCode d"><code class="sourceCode d"><span class="kw">if</span> (event.type == Event.EventType.MouseWheelMoved)
{
    writeln(<span class="st">&quot;wheel movement: &quot;</span>, event.mouseWheel.delta);
    writeln(<span class="st">&quot;mouse x: &quot;</span>, event.mouseWheel.x);
    writeln(<span class="st">&quot;mouse y: &quot;</span>, event.mouseWheel.y);
}</code></pre></div>
<h2 id="the-mousebuttonpressed-and-mousebuttonreleased-events">The MouseButtonPressed and MouseButtonReleased Events</h2>
<p>The <code>Event.EventType.MouseButtonPressed</code> and <code>Event.EventType.MouseButtonReleased</code> events are triggered when a mouse button is pressed/released.</p>
<p>DSFML supports 5 mouse buttons: left, right, middle (wheel), extra #1 and extra #2 (side buttons).</p>
<p>The member associated to these events is <code>event.mouseButton</code>, it contains the code of the pressed/released button, as well as the current position of the mouse cursor.</p>
<div class="sourceCode"><pre class="sourceCode d"><code class="sourceCode d"><span class="kw">if</span> (event.type == Event.EventType.MouseButtonPressed)
{
    <span class="kw">if</span> (event.mouseButton.button == Mouse.Button.Right)
    {
        writeln(<span class="st">&quot;the right button was pressed&quot;</span>);
        writeln(<span class="st">&quot;mouse x: &quot;</span>, event.mouseButton.x);
        writeln(<span class="st">&quot;mouse y: &quot;</span>, event.mouseButton.y);
    }
}</code></pre></div>
<h2 id="the-mousemoved-event">The MouseMoved Event</h2>
<p>The <code>Event.EventType.MouseMoved</code> event is triggered when the mouse moves within the window.</p>
<p>This event is triggered even if the window doesn't have the focus. However, it is triggered only when the mouse moves within the inner area of the window, not when it moves over the titlebar or borders.</p>
<p>The member associated to this event is <code>event.mouseMove</code>, it contains the current position of the mouse cursor relatively to the window.</p>
<div class="sourceCode"><pre class="sourceCode d"><code class="sourceCode d"><span class="kw">if</span> (event.type == Event.EventType.MouseMoved)
{
    writeln(<span class="st">&quot;new mouse x: &quot;</span>, event.mouseMove.x);
    writeln(<span class="st">&quot;new mouse y: &quot;</span>, event.mouseMove.y);
}</code></pre></div>
<h2 id="the-mouseentered-and-mouseleft-event">The MouseEntered and MouseLeft Event</h2>
<p>The <code>Event.EventType.MouseEntered</code> and <code>Event.EventType.MouseLeft</code> events are triggered when the mouse cursor enters/leaves the window.</p>
<p>There's no member associated to these events in the <a href="http://dsfml.com/dsfml/window/event.html">Event</a> union.</p>
<div class="sourceCode"><pre class="sourceCode d"><code class="sourceCode d"><span class="kw">if</span> (event.type == Event.EventType.MouseEntered)
    writeln(<span class="st">&quot;the mouse cursor has entered the window&quot;</span>);

<span class="kw">if</span> (event.type == Event.EventType.MouseLeft)
    writeln(<span class="st">&quot;the mouse cursor has left the window&quot;</span>);</code></pre></div>
<h2 id="the-joystickbuttonpressed-and-joystickbuttonreleased-events">The JoystickButtonPressed and JoystickButtonReleased Events</h2>
<p>The <code>Event.EventType.JoystickButtonPressed</code> and <code>Event.EventType.JoystickButtonReleased</code> events are triggered when a joystick button is pressed/released.</p>
<p>DSFML supports up to 8 joysticks and 32 buttons.</p>
<p>The member associated to these events is <code>event.joystickButton</code>, it contains the identifier of the joystick and the index of the pressed/released button.</p>
<div class="sourceCode"><pre class="sourceCode d"><code class="sourceCode d"><span class="kw">if</span> (event.type == Event.EventType.JoystickButtonPressed)
{
    writeln(<span class="st">&quot;joystick button pressed!&quot;</span>);
    writeln(<span class="st">&quot;joystick id: &quot;</span>, event.joystickButton.joystickId);
    writeln(<span class="st">&quot;button: &quot;</span>, event.joystickButton.button);
}</code></pre></div>
<h2 id="the-joystickmoved-event">The JoystickMoved Event</h2>
<p>The <code>Event.EventType.JoystickMoved</code> event is triggered when a joystick axis moves.</p>
<p>Joystick axes are typically very sensitive, that's why DSFML uses a detection threshold to avoid spamming your event loop with tons of <code>JoystickMoved</code> events. This threshold can be changed with the <code>Window.setJoystickThreshold</code> method, in case you want to receive more or fewer joystick move events.</p>
<p>DSFML supports 8 joystick axes: X, Y, Z, R, U, V, POV X and POV Y. How they map to your joystick depends on its driver.</p>
<p>The member associated to this event is <code>event.joystickMove</code>, it contains the identifier of the joystick, the name of the axis, and its current position (in the range [-100, 100]).</p>
<div class="sourceCode"><pre class="sourceCode d"><code class="sourceCode d"><span class="kw">if</span> (event.type == Event.EventType.JoystickMoved)
{
    <span class="kw">if</span> (event.joystickMove.axis == Joystick.X)
    {
        writeln(<span class="st">&quot;X axis moved!&quot;</span>);
        writeln(<span class="st">&quot;joystick id: &quot;</span>, event.joystickMove.joystickId);
        writeln(<span class="st">&quot;new position: &quot;</span>, event.joystickMove.position);
    }
}</code></pre></div>
<h2 id="the-joystickconnected-and-joystickdisconnected-events">The JoystickConnected and JoystickDisconnected Events</h2>
<p>The <code>Event.EventType.JoystickConnected</code> and <code>Event.EventType.JoystickDisconnected</code> events are triggered when a joystick is connected/disconnected.</p>
<p>The member associated to this event is <code>event.joystickConnect</code>, it contains the identifier of the connected/disconnected joystick.</p>
<div class="sourceCode"><pre class="sourceCode d"><code class="sourceCode d"><span class="kw">if</span> (event.type == Event.EventType.JoystickConnected)
    writeln(<span class="st">&quot;joystick connected: &quot;</span>, event.joystickConnect.joystickId);

<span class="kw">if</span> (event.type == Event.EventType.JoystickDisconnected)
    writeln(<span class="st">&quot;joystick disconnected: &quot;</span>, event.joystickConnect.joystickId);</code></pre></div>
    </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">DSFML maintained by <a href="https://github.com/Jebbs">Jebbs</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>
</body>
</html>
