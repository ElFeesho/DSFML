<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="description" content="DSFML : DSFML is a D binding of SFML " />

  <link rel="stylesheet" type="text/css" media="screen" href="../stylesheets/stylesheet.css">
  <link rel="stylesheet" type="text/css" media="screen" href="../stylesheets/dsfml.css">
  <title>Spatialization: Sounds in 3D</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
</head>
<body>
<!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/Jebbs/DSFML">View on GitHub</a>

          <h1 id="project_title">DSFML</h1>
           <ul class="hnav">
              <li class="hnav"><a class="hnav" href="../index.html">Home</a></li>
              <li class="hnav"><a class="hnav" href="../tutorials.html">Tutorials</a></li>
              <li class="hnav"><a class="hnav" href=".//doc.html">Documentation</a></li>
              <li class="hnav"><a class="hnav" href=".//downloads.html">Downloads</a></li>
              <li class="hnav"><a class="hnav" href="http://en.sfml-dev.org/forums/index.php?board=13.0">Forum</a></li>
              <li class="hnav"><a class="hnav" href="../contact.html">Contact</a></li>
        </ul>

        </header>
    </div>

<!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
<h1 id="spatialization-sounds-in-3d">Spatialization: Sounds in 3D</h1>
<h2 id="introduction">Introduction</h2>
<p>By default, sounds and music are played at full volume in each speaker; they are not spatialized.</p>
<p>If a sound is emitted by an entity which is to the right of the screen, you would probably want to hear it from the right speaker. If a music is being played behind the player, you would want to hear it from the rear speakers of your Dolby 5.1 sound system.</p>
<p>How can this be achieved?</p>
<h2 id="spatialized-sounds-are-mono">Spatialized sounds are mono</h2>
<blockquote>
<p>A sound can be spatialized only if it has a single channel, i.e. if it's a mono sound. Spatialization is disabled for sounds with more channels, since they already explicitly decide how to use the speakers. This is very important to keep in mind.</p>
</blockquote>
<h2 id="the-listener">The listener</h2>
<p>All the sounds and music in your audio environment will be heard by a single actor: the listener. What is output from your speakers is determined by what the listener hears.</p>
<p>The class which defines the listener's properties is <a href="http://dsfml.com/dsfml/audio/listener.html">Listener</a>. Since the listener is unique in the environment, this class only contains static property functions and is not meant to be instantiated.</p>
<p>First, you can set the listener's position in the scene:</p>
<div class="sourceCode"><pre class="sourceCode d"><code class="sourceCode d">Listener.Position = Vector3f(<span class="fl">10.f</span>, <span class="fl">0.f</span>, <span class="fl">5.f</span>);</code></pre></div>
<p>If you have a 2D world you can just use the same Y value everywhere, usually 0.</p>
<p>In addition to its position, you can define the listener's orientation:</p>
<div class="sourceCode"><pre class="sourceCode d"><code class="sourceCode d">Listener.Direction = Vector3f(<span class="fl">1.f</span>, <span class="fl">0.f</span>, <span class="fl">0.f</span>);</code></pre></div>
<p>Here, the listener is oriented along the +X axis. This means that, for example, a sound emitted at (15, 0, 5) will be heard from the right speaker.</p>
<p>The &quot;up&quot; vector of the listener is set to (0, 1, 0) by default, in other words, the top of the listener's head is pointing towards +Y.</p>
<p>Finally, the listener can adjust the global volume of the scene:</p>
<div class="sourceCode"><pre class="sourceCode d"><code class="sourceCode d">Listener.GlobalVolume = <span class="fl">50.f</span>;</code></pre></div>
<p>The value of the volume is in the range [0 .. 100], so setting it to 50 reduces it to half of the original volume.</p>
<h2 id="audio-sources">Audio sources</h2>
<p>Every audio source provided by DSFML (sounds, music, streams) defines the same properties for spatialization.</p>
<p>The main property is the position of the audio source.</p>
<div class="sourceCode"><pre class="sourceCode d"><code class="sourceCode d">sound.position = Vector3f(<span class="fl">2.f</span>, <span class="fl">0.f</span>, -<span class="fl">5.f</span>);</code></pre></div>
<p>This position is absolute by default, but it can be relative to the listener if needed.</p>
<div class="sourceCode"><pre class="sourceCode d"><code class="sourceCode d">sound.relativeToListener = <span class="kw">true</span>;</code></pre></div>
<p>This can be useful for sounds emitted by the listener itself (like a gun shot, or foot steps). It also has the interesting side-effect of disabling spatialization if you set the position of the audio source to (0, 0, 0). Non-spatialized sounds can be required in various situations: GUI sounds (clicks), ambient music, etc.</p>
<p>You can also set the factor by which audio sources will be attenuated depending on their distance to the listener.</p>
<div class="sourceCode"><pre class="sourceCode d"><code class="sourceCode d">sound.minDistance = <span class="dv">5</span>;
sound.attenuation = <span class="dv">10</span>;</code></pre></div>
<p>The minimum distance is the distance under which the sound will be heard at its maximum volume. As an example, louder sounds such as explosions should have a higher minimum distance to ensure that they will be heard from far away. Please note that a minimum distance of 0 (the sound is inside the head of the listener!) would lead to an incorrect spatialization and result in a non-attenuated sound. 0 is an invalid value, never use it.</p>
<p>The attenuation is a multiplicative factor. The greater the attenuation, the less it will be heard when the sound moves away from the listener. To get a non-attenuated sound, you can use 0. On the other hand, using a value like 100 will highly attenuate the sound, which means that it will be heard only if very close to the listener.</p>
<p>Here is the exact attenuation formula, in case you need accurate values:</p>
<pre><code>MinDistance   is the sound&#39;s minimum distance, set with minDistance
Attenuation   is the sound&#39;s attenuation, set with attenuation
Distance      is the distance between the sound and the listener
Volume factor is the calculated factor, in range [0 .. 1], that will be applied to the sound&#39;s volume

Volume factor = MinDistance / (MinDistance + Attenuation * (max(Distance, MinDistance) - MinDistance))</code></pre>
</section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">DSFML maintained by <a href="https://github.com/Jebbs">Jebbs</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>
</body>
</html>
